#+TITLE: PyReconstruct
#+OPTIONS: toc:2

* PyReconstruct

PyReconstruct is an actively maintained, updated, and extensible version of *RECONSTRUCT* written entirely in Python. We are currently alpha-testing this program, but we are more than happy to make it available now.

Because the program is undergoing rapid changes, we are not yet ready to provide a single executable file. For the time being, to access PyReconstruct you will need to download the code through this GitHub repository. We have worked hard to make this process as painless as possible.

* Installation

Installing PyReconstruct is a three-step process:

1. Make sure you have Python 3.9 or higher.
2. Clone the repository to your local machine.
3. Install dependencies that are required to run the program.

(Do not fret: For Windows users, we have written scripts that automate the process of installing dependencies.)

** Checking Python version

To check which version of Python you currently have, run the command =python --version= in a terminal. (In Windows, this can be down by clicking =START= and searching from =command prompt=. In the command prompt window, type =python --version= and press enter.)

The output of the above command will let you know which version of python you are running. You should be running Python 3.9 or higher for PyReconstruct. If there is a error (this likely means you do not have Python installed) or if you need to upgrade, search for and download Python, for example, in the Microsoft App Store.

Once downloaded, you can restart the command prompt and run =python --version= again to see if you successfully installed Python.

** Cloning this repository

/Cloning/ is similar to copying the code in a repository onto your local machine. However, unlike copying the code directly, a clone remains "linked" to the repository hosted on GitHub, and any changes we make can be easily and quickly incorporated into your cloned copy.

Cloning can be done through git's command line interface or through GitHub's excellent desktop application. You can clone the repository anywhere you like on your machine,. The 

*** GitHub Desktop

**** Download and install GitHub's desktop application [[https://desktop.github.com/][here]].
   
****  

*** Command line

**** Make sure you have =git=. (For Windows, =git= can be downloaded [[https://git-scm.com/download/win][here]].)

**** Clone the respository: =git clone https://www.github.com/SynapseWeb/pyReconstruct /destination/path/to/repo=

** Installing dependencies

PyReconstruct depends (hence, "dependencies") on a host of other Python packages that must be downloaded in order to run the program. For Windows users, we have automated this process.

*** Automated installation (Windows)

If you don't want to hassle with installing dependencies manually, we have written a convenience script that does this for you.

This script will download and save dependencies in an =env= directory in the root of the repository. It will not save files anywhere else on your machine.

1. Open the repository and find and open the =windows= directory.
2. Double-click on =install.bat=.
3. A console window will open and downloading will start automatically.
4. Wait until dependencies have been installed. (This might take several minutes.)
5. After installation, click any key to exit the console.

*** Manual installation

Dependencies needed to run pyReconstruct can be found in this repo (~/src/requirements.txt~) and can be installed via PIP: =pip install -r src/requirements.txt=

Using virtual environments such as Python's built-in /venv/ module is an excellent way of managing dependencies necessary to run PyReconstruct.

Here is an example of installing dependencies in a newly created virtual environment in Linux and Mac machines:

- Change current working directory to your local copy of this repo: =cd /path/to/local/repo=
- Create a virtual environment (for this example, we will call it =env=): =python -m venv env=
- Activate the virtual environment: =source env/bin/activate=
- Install dependencies: =pip install -r src/requirements.txt=

** Uninstalling

If you'd like to uninstall PyReconstruct, simply delete the entire PyReconstruct repository on your local machine. (If you cloned the repository through GitHub Desktop, you can also delete it there.)

* Getting started

** Launching PyReconstruct

*** After automated installation (Windows)

If you followed the steps above to automatically install dependencies, you can easily start PyReconstruct by clicking on =pyReconstruct.bat= in the =windows= directory of the repository.

You can right-click on this file and make a shortcut, which can be place anywhere on your machine for easy access. (Do not move the actual =pyReconstruct.bat= file itself.)

*** Manually

Refer above for instructions on manually installing dependencies. If you are using a virtual environment, activate it and run the following command in a terminal: =python src/pyReconstruct.py=

** The main window

When you first open PyReconstruct, you will see a welcome image on top of a black field. This is the *main window* and it is where the majority of your time is spent. The various parts of the main window are outlined in the following figure.

[[./manual/img/main_window_labeled.png]]

*** Tools palette

There are 6 tools available in the *tools palette* (each can be accessed by clicking on it or by pressing a keyboard shortcut):

1. Pointer / select (p)
2. Pan / Zoom (z)
3. Knife (k)
4. Closed trace (c)
5. Open trace (o)
6. Stamp (s)

Hovering over each tool reveals its name and shortcut. For example, hovering over the top-most tool shows that it is the pointer tool and that it can be selected by pressing =p= on the keyboard.

(Note: =Shift-L= will move the tool palette, the color/contrast, and the change section buttons to the other side of the main window, which left-handed user might find useful if reconstructing on a tablet.)

*** Trace palette

Trace attributes can be quickly accessed through the *trace palette*, a set of 20 user-defined trace attributes at the bottom of the main window. Each can be changed by right-clicking and editing the attributes. The name of the currently selected trace attributes appears above the trace palette.

** Starting a new series

** Tracing your first object

** Exiting

* Other

** Repository structure

This GitHub repository is structured to be easily understandable. All source files can be found under ~src/~ and other file types are here:

|------------------------------------+----------------------|
| File type(s)                       | Location             |
|------------------------------------+----------------------|
| Script to run pyReconstruct        | src/pyReconstruct.py |
| List of dependencies               | src/requirements.txt |
| Modules                            | src/modules          |
| Images and example series          | src/assets           |
| File locations and other constants | src/constants        |
| Notes and features                 | notes/               |
| Miscellaneous                      | misc/                |
|------------------------------------+----------------------|

** Dependencies



** Running pyReconstruct

Once in the correct directory, pyReconstruct can be started with the following command: =python pyReconstruct.py=

